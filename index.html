<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FinTeens Prototype</title>
  <style>
    /* Enhanced styles for creativity and visual appeal */
    @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
    *{box-sizing:border-box;font-family:'Inter', system-ui, Arial, sans-serif}
    :root{
      --primary:#0b66b3;
      --accent:#ffb703;
      --accent-dark:#fb5607;
      --success:#28a745;
      --bg1:#fff3e8;
      --bg2:#e8f7ff;
      --shadow-light:0 4px 12px rgba(11,102,179,0.1);
      --shadow-hover:0 8px 24px rgba(11,102,179,0.15);
    }
    body{
      background:linear-gradient(135deg,var(--bg1),var(--bg2));
      margin:0;padding:18px;color:#06283d;
      animation:fadeIn 0.8s ease-out;
    }
    @keyframes fadeIn{from{opacity:0;transform:translateY(20px);}to{opacity:1;transform:translateY(0);}}
    .container{max-width:980px;margin:0 auto}
    .topbar{
      display:flex;justify-content:space-between;align-items:center;
      background:linear-gradient(135deg,white, rgba(255,255,255,0.8));
      padding:16px 20px;border-radius:16px;margin-bottom:20px;
      box-shadow:var(--shadow-light);
      backdrop-filter:blur(10px);
    }
    h1{margin:0;color:var(--primary);font-weight:700;font-size:1.8em;letter-spacing:-0.5px;}
    .card{
      background:linear-gradient(145deg,white, rgba(255,255,255,0.9));
      padding:24px;border-radius:20px;margin-top:20px;box-shadow:var(--shadow-light);
      transition:transform 0.3s ease, box-shadow 0.3s ease;
      position:relative;overflow:hidden;
    }
    .card::before{content:'';position:absolute;top:0;left:0;width:100%;height:4px;background:linear-gradient(90deg,var(--primary),var(--accent));}
    .card:hover{transform:translateY(-4px);box-shadow:var(--shadow-hover);}
    .center{text-align:center}
    .small{font-size:13px}
    .hidden{display:none}
    input{
      display:block;padding:14px;margin:12px 0;border-radius:12px;border:2px solid #e6eef7;
      width:100%;font-size:16px;transition:border-color 0.3s ease;
      background:rgba(255,255,255,0.8);
    }
    input:focus{border-color:var(--primary);outline:none;box-shadow:0 0 0 3px rgba(11,102,179,0.1);}
    button{
      background:linear-gradient(135deg,var(--primary),#085a9a);color:#fff;border:none;
      padding:12px 20px;border-radius:12px;cursor:pointer;font-weight:500;
      transition:transform 0.2s ease, box-shadow 0.2s ease;
    }
    button:hover{transform:translateY(-2px);box-shadow:0 4px 12px rgba(11,102,179,0.3);}
    button.ghost{
      background:transparent;color:var(--primary);border:2px solid #cfe6ff;
      transition:border-color 0.3s ease, color 0.3s ease;
    }
    button.ghost:hover{border-color:var(--accent);color:var(--accent);background:rgba(255,183,3,0.1);}
    .row{display:flex;gap:12px;align-items:center;flex-wrap:wrap;}
    .row.space{justify-content:space-between}
    .welcomeCard{flex:1}
    .actions{display:flex;flex-direction:column;gap:10px;min-width:150px}
    .progressbar{
      background:#f1f5f9;border-radius:12px;height:8px;overflow:hidden;margin-top:12px;
      box-shadow:inset 0 2px 4px rgba(0,0,0,0.05);
    }
    .bar{
      height:100%;width:0%;background:linear-gradient(90deg,var(--accent),var(--accent-dark));
      border-radius:12px;transition:width 0.6s ease-out;
      box-shadow:0 0 10px rgba(255,183,3,0.5);
    }
    .badges{display:flex;gap:10px;flex-wrap:wrap;margin-top:12px}
    .badge{
      padding:10px 14px;border-radius:50px;background:linear-gradient(135deg,#ffd6a5,#fdc49b);
      color:#6b2a00;font-weight:600;font-size:14px;
      display:flex;align-items:center;gap:6px;
      transition:transform 0.2s ease;
      box-shadow:0 2px 8px rgba(251,86,7,0.2);
    }
    .badge:hover{transform:scale(1.05);}
    .badge::before{content:'üèÜ';font-size:16px;}
    .muted{color:#667784;font-style:italic;}
    .cardsGrid{
      display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;margin-top:16px;
    }
    .learnCard, .activityCard{
      padding:20px;border-radius:16px;background:linear-gradient(145deg,#fff,#fffef6);
      box-shadow:var(--shadow-light);transition:transform 0.3s ease, box-shadow 0.3s ease;
      position:relative;overflow:hidden;
    }
    .learnCard::before, .activityCard::before{
      content:'';position:absolute;top:0;left:0;right:0;height:4px;
      background:linear-gradient(90deg,var(--primary),var(--accent));
    }
    .learnCard:hover, .activityCard:hover{transform:translateY(-6px);box-shadow:var(--shadow-hover);}
    .learnBtn, .activityBtn{
      margin-top:12px;background:linear-gradient(135deg,var(--accent),var(--accent-dark));
      color:#fff;border:none;padding:10px;border-radius:10px;width:100%;font-weight:600;
      transition:transform 0.2s ease;
    }
    .learnBtn:hover, .activityBtn:hover{transform:scale(1.02);}
    .lesson{margin-top:16px}
    .mentorBox{display:flex;flex-direction:column;gap:12px}
    .mentorLog{
      min-height:140px;border-radius:14px;padding:16px;background:#f8fafc;
      border:2px dashed #d1e3f8;overflow:auto;
      animation:fadeIn 0.5s ease-out;
    }
    .mentorEntry, .mentorBot {
      margin:12px 0;padding:12px;border-left:4px solid #ccc;border-radius:8px;
      animation:slideIn 0.3s ease-out;
    }
    @keyframes slideIn{from{opacity:0;transform:translateX(-20px);}to{opacity:1;transform:translateX(0);}}
    .mentorEntry { border-left-color: var(--primary); background:rgba(11,102,179,0.05); }
    .mentorBot { border-left-color: var(--success); background:#f8f9fa; }
    footer{
      margin-top:20px;text-align:center;color:#234;
      background:linear-gradient(135deg,white, rgba(255,255,255,0.8));
      padding:16px;border-radius:16px;box-shadow:var(--shadow-light);
    }
    #answers button{
      display:block;width:100%;text-align:left;margin:10px 0;
      background:#f1f5f9;color:#06283d;border-radius:10px;padding:14px;border:none;
      transition:background 0.3s ease, transform 0.2s ease;
    }
    #answers button:hover{transform:translateX(4px);}
    #answers button.correct{background:linear-gradient(135deg,#dff7e2,#c3e6cb);box-shadow:0 4px 12px rgba(40,167,69,0.2);}
    #answers button.wrong{background:linear-gradient(135deg,#ffe6e6,#f8d7da);box-shadow:0 4px 12px rgba(220,53,69,0.2);}
    #questionArea h3{margin:0 0 12px 0;color:var(--primary);font-weight:600;}
  </style>
</head>
<body>
  <!-- App content would follow here, omitted for brevity in this paste snippet -->
  <script>
    function checkDailyLogin() {
      const today = new Date().toDateString();
      if (state.lastLogin !== today) {
        state.streak = (state.lastLogin && new Date(state.lastLogin).toDateString() === new Date(Date.now() - 86400000).toDateString()) ? state.streak + 1 : 1;
        state.points += 5 * state.streak; // Bonus for streak
        state.lastLogin = today;
        saveState();
        updateUI();
        showReward('Daily Login Bonus!', `+${5 * state.streak} points for streak of ${state.streak}! üî•`);
        triggerConfetti();
        if (state.streak >= 7) {
          if (!state.badges.includes('Streak Master üî•')) {
            state.badges.push('Streak Master üî•');
            saveState();
            updateUI();
            showReward('Streak Master Achieved!', '7-day streak! Extra badge unlocked! üèÜ');
          }
        }
      }
    }

    function updateStreak() {
      streakDisplay.style.display = state.streak > 0 ? 'inline-flex' : 'none';
      if (state.streak > 0) streakDisplay.innerHTML = `Streak: ${state.streak} üî•`;
    }

    function updateLevelContent() {
      hubLevel.innerText = state.level;
      // Unlock lessons and activities based on level
      if (state.level >= 3) {
        loansCard.style.display = 'block';
        stockGameCard.style.display = 'block';
      }
      if (state.level >= 5) {
        insuranceCard.style.display = 'block';
      }
      if (state.level >= 7) {
        entreCard.style.display = 'block';
      }
      // Remove level-locked class if unlocked
      if (state.level >= 3) investBtn.parentElement.classList.remove('level-locked');
    }

    startBtn.onclick = ()=>{
      const nm = nameInput.value.trim();
      const ag = parseInt(ageInput.value);
      if(!nm || !ag){ alert('Please enter name and age to start your adventure! üåü'); return; }
      state.name = nm;
      state.age = ag;
      state.points = state.points || 0;
      state.level = state.level || 1;
      state.badges = state.badges || [];
      state.streak = state.streak || 0;
      state.lastLogin = state.lastLogin || null;
      state.challenges = state.challenges || {quiz: false, lesson: false, activity: false, mentor: false};
      state.activitiesCompleted = state.activitiesCompleted || {budget: false, savings: false, stock: false};
      state.currentQ = 0;
      state.score = 0;
      state.quizAnswered = false;
      state.lessonsCompleted = state.lessonsCompleted || 0;
      saveState();
      updateUI();
      updateLevelContent();
      showSection('dashboard');
      checkDailyLogin();
    }

    tourBtn.onclick = () => showMVPModal('Quick Tour üéâ', 'Swipe to learn how FinTeens works! Ready for fun? üöÄ');

    resetBtn.onclick = ()=>{ if(confirm('Reset demo data? Your adventure starts fresh! üå±')){ localStorage.removeItem('finteens_state'); location.reload(); } }

    function showSection(s){
      [onboard, dashboard, quiz, hub, activities, mentor].forEach(el => el.classList.add('hidden'));
      const target = document.getElementById(s);
      target.classList.remove('hidden');
      target.style.animation = 'fadeIn 0.6s ease-out';
    }

    function updateUI(){
      welcomeMsg.innerText = state.name ? `Hi ${state.name}! üåü` : 'Hi! üëã';
      userNameDisplay.innerText = state.name ? state.name : '';
      pointsEl.innerText = state.points || 0;
      levelEl.innerText = state.level || 1;
      const pct = Math.min(100, (state.points || 0) % 100);
      bar.style.width = pct + '%';
      badgesEl.innerHTML = '';
      (state.badges || []).forEach(b=>{
        const bdiv = document.createElement('span');
        bdiv.className = 'badge';
        bdiv.innerText = b;
        badgesEl.appendChild(bdiv);
      });
      tipText.innerText = [
        "Save small, start today. Your future self thanks you! üåà",
        "Track one expense daily. Knowledge is power! üí™",
        "Ask mentor for quick tips. You're not alone! ü§ù",
        "Level up by completing activities‚Äîfun awaits! üéÆ"
      ][Math.floor(Math.random()*4)];
      updateStreak();
      updateLevelContent();
    }

    // Challenges
    challengesBtn.onclick = () => {
      showSection('dashboard');
      challenges.classList.toggle('hidden');
    };

    function updateChallenges() {
      const items = challengeList.querySelectorAll('.challenge-item');
      items.forEach(item => {
        const challenge = item.dataset.challenge;
        item.classList.toggle('completed', state.challenges[challenge]);
      });
      claimRewards.style.display = Object.values(state.challenges).every(c => c) ? 'block' : 'none';
    }

    claimRewards.onclick = () => {
      let totalReward = 0;
      Object.keys(state.challenges).forEach(key => {
        if (state.challenges[key]) {
          const rewards = {quiz: 20, lesson: 15, activity: 25, mentor: 10};
          totalReward += rewards[key];
          state.challenges[key] = false; // Reset for next day
        }
      });
      if (totalReward > 0) {
        state.points += totalReward;
        saveState();
        updateUI();
        showReward('Challenges Complete!', `+${totalReward} bonus points! üéÅ`);
        triggerConfetti();
        updateChallenges();
      }
    }

    // Quiz
    quizBtn.onclick = ()=>{ startQuiz(); showSection('quiz'); }
    function startQuiz(){
      state.currentQ = 0;
      state.score = 0;
      state.quizAnswered = false;
      renderQuestion();
      nextQ.classList.add('hidden');
      prevQ.classList.add('hidden');
      finish.classList.add('hidden');
    }

    function renderQuestion(){
      const q = sampleQuestions[state.currentQ];
      questionArea.innerHTML = `<h3>Q${state.currentQ+1}. ${q.q} ‚ùì</h3>`;
      answers.innerHTML = '';
      state.quizAnswered = false;
      q.options.forEach((opt,i)=>{
        const btn = document.createElement('button');
        btn.innerText = `‚Ä¢ ${opt}`;
        btn.onclick = ()=> checkAnswer(i);
        answers.appendChild(btn);
      });
