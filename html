<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>FinTeens Prototype - Updated 2025 Edition</title>
  <link rel="stylesheet" href="styles.css">
  <!-- Chart.js CDN -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@latest/dist/chart.min.js"></script>
</head>
<body>
  <div class="confetti" id="confetti"></div>

  <div class="reward-popup hidden" id="rewardPopup" aria-hidden="true">
    <h2 id="rewardTitle">Achievement Unlocked! ğŸ‰</h2>
    <p id="rewardMsg">You've earned +10 points!</p>
    <div style="display:flex;gap:8px;justify-content:center;margin-top:12px;">
      <button onclick="closeReward()" class="ghost">Awesome! ğŸš€</button>
    </div>
  </div>

  <div class="container">
    <header class="topbar">
      <h1>FinTeens ğŸš€ - 2025 Edition</h1>
      <div class="top-actions">
        <span id="userNameDisplay"></span>
        <span id="streakDisplay" class="badge streak-badge hidden">Streak: 0 ğŸ”¥</span>
        <button id="resetBtn" title="Reset demo">ğŸ”„ Reset</button>
      </div>
    </header>

    <main id="app">
      <section id="onboard" class="card center">
        <h2>Welcome to FinTeens ğŸ‘‹âœ¨</h2>
        <p style="font-size:16px;">Learn money by playing â€” quick, fun lessons for teens. Updated for 2025 with RBI & SEBI latest!</p>
        <input id="name" placeholder="Your name (e.g., Asha)" />
        <input id="age" placeholder="Age (10-19)" type="number" min="10" max="19" />
        <div class="row">
          <button id="startBtn">Start Adventure ğŸŒŸ</button>
          <button id="tourBtn" class="ghost">Take a quick tour ğŸ‰</button>
        </div>
      </section>

      <section id="dashboard" class="hidden">
        <div class="row space">
          <div class="card small welcomeCard floating">
            <h3 id="welcomeMsg" style="color:var(--primary);">Hi!</h3>
            <p id="levelMsg" style="font-weight:500;">Level: <span id="level">1</span> â€¢ Points: <span id="points" class="animatedPoints">0</span></p>
            <div class="progressbar"><div id="bar" class="bar"></div></div>
            <div style="display:flex;gap:8px;margin-top:12px;align-items:center;">
              <div class="coin">â‚¹</div>
              <div class="muted small">Pocket finance made fun â€” track & grow!</div>
            </div>
          </div>

          <div class="card small actions">
            <button id="quizBtn">Daily Quiz ğŸ¯</button>
            <button id="hubBtn">Learning Hub ğŸ“š</button>
            <button id="activitiesBtn">Fun Activities ğŸ®</button>
            <button id="mentorBtn">Ask Mentor ğŸ¤–</button>
            <button id="challengesBtn">Challenges âš¡</button>
            <button id="tradingBtn" class="ghost" style="margin-top:6px;">Open Trading Desk ğŸ’¹</button>
          </div>
        </div>

        <div class="row" style="gap:16px;align-items:flex-start;margin-top:14px;">
          <!-- Wallet Card -->
          <div class="card walletCard floating" style="flex:1;min-width:300px;">
            <div style="display:flex;justify-content:space-between;align-items:center;width:100%;">
              <h4 style="margin:0;color:var(--primary);">Wallet ğŸ’³ (Demo)</h4>
              <div style="display:flex;align-items:center;gap:6px">
                <div class="coin">â‚¹</div>
                <div style="font-weight:700;font-size:1.05em" id="walletBalance">â‚¹0</div>
              </div>
            </div>
            <p class="muted small">Use demo wallet to deposit and trade â€” funds & trades are simulated for learning.</p>
            <div class="wallet-actions" style="width:100%;display:flex;gap:8px;">
              <input id="depositAmt" placeholder="Amount to deposit (â‚¹)" type="number" min="1" style="flex:1;padding:8px;border-radius:10px;border:1px solid #e6eef7"/>
              <button id="depositBtn" class="ghost">Deposit</button>
            </div>
            <div class="wallet-actions" style="width:100%;display:flex;gap:8px;">
              <input id="sendAmt" placeholder="Amount to withdraw (â‚¹)" type="number" min="1" style="flex:1;padding:8px;border-radius:10px;border:1px solid #e6eef7"/>
              <button id="withdrawBtn" class="ghost">Withdraw</button>
            </div>
            <div style="margin-top:10px;">
              <small class="muted">Tip: Deposit demo funds and try trading. Orders support market & limit types; limit orders execute when price reaches your target.</small>
            </div>
          </div>

          <!-- Portfolio Card -->
          <div class="card floating" style="flex:1;min-width:300px;">
            <div style="display:flex;justify-content:space-between;align-items:center;">
              <h4 style="margin:0;color:var(--accent-dark);">Portfolio / Demat Account</h4>
              <div style="font-weight:700;color:var(--primary)" id="portfolioValue">â‚¹0</div>
            </div>
            <div class="portfolio-list" id="portfolioList">
              <div class="muted" style="padding:6px;">No holdings yet â€” buy some stocks to build your portfolio!</div>
            </div>
            <div style="margin-top:10px;display:flex;gap:8px;">
              <button id="refreshPrices" class="ghost">Refresh Prices</button>
              <button id="liquidateAll" class="ghost">Sell All</button>
            </div>
          </div>
        </div>

        <div class="card badgesCard" style="margin-top:18px;">
          <h4 style="color:var(--primary);">Your Badges ğŸ…</h4>
          <div id="badges" class="badges"></div>
        </div>

        <div class="card small tipsCard" style="margin-top:12px;">
          <h4 style="color:var(--accent);">Tip of the day ğŸ’¡</h4>
          <p id="tipText">RBI now lets teens 10+ run their own savings accountsâ€”start yours today! ğŸŒ± (2025 Update)</p>
        </div>

        <!-- New Challenges Section -->
        <div id="challenges" class="card challenge-card hidden" style="margin-top:12px;">
          <h4 style="color:var(--success);">Daily Challenges âš¡</h4>
          <div id="challengeList">
            <div class="challenge-item" data-challenge="quiz">Complete today's quiz <span class="muted">(+20 pts)</span></div>
            <div class="challenge-item" data-challenge="lesson">Finish one lesson <span class="muted">(+15 pts)</span></div>
            <div class="challenge-item" data-challenge="activity">Complete a fun activity <span class="muted">(+25 pts)</span></div>
            <div class="challenge-item" data-challenge="mentor">Ask the mentor a question <span class="muted">(+10 pts)</span></div>
            <div class="challenge-item" data-challenge="upi">Simulate a safe UPI payment <span class="muted">(+15 pts)</span></div>
            <div class="challenge-item" data-challenge="streak7">7-day streak achieved <span class="muted">(+35 pts)</span></div>
            <div class="challenge-item hidden" data-challenge="stock">Try the Stock Mini-Game <span class="muted">(+30 pts)</span></div>
          </div>
          <button id="claimRewards" class="ghost hidden" style="margin-top:10px;">Claim All Rewards! ğŸ</button>
        </div>
      </section>

      <!-- Quiz / Hub / Activities / Mentor sections -->
      <section id="quiz" class="card hidden">
        <h2>Daily Quiz ğŸ¯âœ¨</h2>
        <p class="muted">Earn points for correct answers. Complete all Qs to finish & unlock badges! Updated for 2025 trends.</p>
        <div id="questionArea"></div>
        <div id="answers"></div>
        <div class="row">
          <button id="prevQ" class="ghost hidden">â¬… Previous</button>
          <button id="nextQ" class="ghost hidden">Next â¡</button>
          <button id="finish" class="hidden">Finish Quiz & Celebrate! ğŸŠ</button>
          <button id="quitQuiz" class="ghost">Back to Dash ğŸ”™</button>
        </div>
      </section>

      <section id="hub" class="card hidden">
        <h2>Learning Hub ğŸ“šğŸŒŸ</h2>
        <p class="muted">Unlock more lessons as you level up! Current Level: <span id="hubLevel"></span>. Featuring 2025 RBI/SEBI updates.</p>
        <div class="cardsGrid" id="hubGrid">
          <!-- hub topics injected by JS -->
        </div>
        <div id="lesson" class="lesson hidden card small"></div>
        <div class="row">
          <button id="backDash" class="ghost">Back to Dashboard ğŸ”™</button>
        </div>
      </section>

      <section id="activities" class="card hidden">
        <h2>Fun Activities ğŸ®ğŸŒŸ</h2>
        <p class="muted">Interactive games to reinforce learning. Earn extra points and badges! New 2025 UPI simulator added.</p>
        <div class="cardsGrid">
          <div class="activityCard">
            <h3>Budget Simulator ğŸ’°</h3>
            <p>Allocate â‚¹1000 pocket money to categories. See how choices affect savings!</p>
            <button class="activityBtn" id="startBudgetBtn">Play Now! ğŸ¯</button>
          </div>
          <div class="activityCard">
            <h3>Savings Goal Calculator ğŸ·</h3>
            <p>Set a goal and see how long it takes to save with interest! (2025 RBI rates)</p>
            <button class="activityBtn" id="startSavingsBtn">Calculate! ğŸ“Š</button>
          </div>
          <div class="activityCard level-locked hidden" id="stockGameCard">
            <h3>Stock Market Mini-Game ğŸ“ˆ</h3>
            <p>Make virtual investments and track returns. Risk vs reward! Enhanced with SEBI tips.</p>
            <button class="activityBtn" id="startStockBtn">Invest Virtually! ğŸ²</button>
          </div>
          <div class="activityCard">
            <h3>UPI Transaction Simulator ğŸ“±</h3>
            <p>Simulate safe UPI payments and learn fraud avoidance. Based on 2025 volumes!</p>
            <button class="activityBtn" id="startUPIBtn">Send UPI! âš¡</button>
          </div>
        </div>
        <div id="activityArea" class="hidden"></div>
        <div class="row">
          <button id="backDashAct" class="ghost">Back to Dashboard ğŸ”™</button>
        </div>
      </section>

      <section id="mentor" class="card hidden">
        <h2>AI Mentor â€” Money Buddy ğŸ¤–ğŸ’¬</h2>
        <p class="muted">Ask a simple question and get a friendly, fun answer. Updated with 2025 RBI/SEBI insights!</p>
        <div class="mentorBox">
          <div id="mentorLog" class="mentorLog"></div>
          <input id="mentorQ" placeholder="Type a question like: 'UPI stats 2025?' ğŸ’­" />
          <div class="row">
            <button id="askMentor">Ask Buddy! ğŸš€</button>
            <button id="clearLog" class="ghost">Clear Chat ğŸ—‘</button>
            <button id="backDash2" class="ghost">Back ğŸ”™</button>
          </div>
        </div>
      </section>

      <!-- Trading Modal -->
      <div id="tradingModal" class="modal hidden" aria-hidden="true">
        <div class="modal-content">
          <div class="modal-header">
            <h3>Trading Desk â€” Demo Demat Account</h3>
            <div style="display:flex;gap:8px;align-items:center">
              <div class="muted small">Wallet: <strong id="modalWallet">â‚¹0</strong></div>
              <button id="closeTrading" class="close-btn" aria-label="Close">&times;</button>
            </div>
          </div>
          <div class="modal-body">
            <div class="trade-grid">
              <div>
                <div style="display:flex;justify-content:space-between;align-items:center;">
                  <h4 style="margin:0">Market Watch</h4>
                  <div class="muted small">Live-ish demo prices</div>
                </div>
                <div class="market-watch" id="marketWatch"></div>

                <!-- Price Charts Section -->
                <div style="margin-top:12px;">
                  <h4 style="margin:0">Price Charts ğŸ“Š</h4>
                  <div class="muted small">Simulated history (updates every 30s)</div>
                  <div class="charts-grid" id="priceCharts"></div>
                </div>

                <div style="margin-top:12px;">
                  <h4 style="margin:0">Place Order</h4>
                  <div style="display:flex;gap:8px;margin-top:8px;flex-wrap:wrap;">
                    <select id="orderSymbol" style="width:160px;">
                      <option value="A">A</option>
                      <option value="B">B</option>
                      <option value="C">C</option>
                    </select>
                    <select id="orderType" style="width:160px;">
                      <option value="market">Market</option>
                      <option value="limit">Limit</option>
                    </select>
                    <input id="orderQty" type="number" min="1" value="1" style="width:120px;" />
                    <input id="orderPrice" type="number" min="1" placeholder="Limit â‚¹ (for limit orders)" style="width:160px;" />
                  </div>
                  <div style="display:flex;gap:8px;margin-top:8px;">
                    <button id="placeBuy" class="ghost">Buy</button>
                    <button id="placeSell" class="ghost">Sell</button>
                  </div>
                </div>

                <div style="margin-top:12px;">
                  <h4 style="margin:0">Open Orders</h4>
                  <div class="orders" id="openOrders"></div>
                </div>

                <div style="margin-top:12px;">
                  <h4 style="margin:0">Order History</h4>
                  <div class="order-history" id="orderHistory"></div>
                </div>
              </div>

              <div>
                <div style="display:flex;justify-content:space-between;align-items:center;">
                  <h4 style="margin:0">Portfolio Snapshot</h4>
                  <div class="muted small">P&L shows live delta</div>
                </div>
                <div style="margin-top:8px;" id="portfolioSnapshot"></div>

                <div style="margin-top:12px;">
                  <h4 style="margin:0">Order Book (Simulated)</h4>
                  <div class="order-book" id="orderBook">
                    <div class="muted small" style="padding:6px;">No active book â€” limit orders are stored here until matched</div>
                  </div>
                </div>

                <div style="margin-top:12px;">
                  <h4 style="margin:0">Quick Actions</h4>
                  <div style="display:flex;gap:8px;margin-top:8px;">
                    <button id="refreshMarket" class="ghost">Refresh Market</button>
                    <button id="cancelAllOrders" class="ghost">Cancel All Orders</button>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <footer class="card small center" style="margin-top:18px;">
        <small>Prototype demo â€” no server. Works offline in browser. Updated Oct 2025 with latest RBI/SEBI data. Built for hackathon with love! â¤</small>
      </footer>
    </main>
  </div>

  <script src="script.js" defer></script>
</body>
</html>
